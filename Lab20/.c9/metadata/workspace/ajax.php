{"filter":false,"title":"ajax.php","tooltip":"/ajax.php","undoManager":{"mark":86,"position":86,"stack":[[{"start":{"row":0,"column":0},"end":{"row":129,"column":0},"action":"insert","lines":["<?php","","function connectDb()","{","    $mysql = mysqli_connect(\"localhost\",\"root\",\"\",\"Lab19\");","    //root si estan en windows","    $mysql->set_charset(\"utf8\");","    ","    if(!$mysql)","    {","        die(\"Connection failed: \". mysqli_connect_error());","    }","    ","    return $mysql;","}","","function disconnectDb($mysql) ","{","     mysqli_close($mysql);","}","","function getPaises($getID)","{","    $mysql = connectDb(); ","","    if($mysql != NULL)","    {","        $sql = \"SELECT nombre, id_Pais FROM Paises\";","","        $result = mysqli_query($mysql, $sql);","","        $i = 0;","","        while($fila = mysqli_fetch_array($result, MYSQLI_BOTH))","        {","            $words[$i] = $fila[\"nombre\"];","            $ids[$i] = $fila[\"id_Pais\"];","            ","            $i++;","        }","","        disconnectDb($mysql);","    }","    ","    if($getID == 0)","    {","        return $words;","    }","    else","    {","        return $ids;","    }","}","","function getCiudades()","{","    $mysql = connectDb(); ","","    if($mysql != NULL)","    {","        $sql = \"SELECT nombre FROM Ciudades\";","","        $result = mysqli_query($mysql, $sql);","","        $i = 0;","        ","        $string_res = \"\";","        $string_res = \"<table>","                        <thead>","                        <tr>","                            <th> Nombre </th>","                        </tr>","                        </thead>","                        <tbody>\";","        ","        while($fila = mysqli_fetch_array($result, MYSQLI_BOTH))","        {","            $words[$i] = $fila[\"nombre\"];","            $i++;","            $string_res .= '<tr>","                            <td>'.$fila[\"nombre\"].'</td>","                            </tr>';","            ","        }","        ","        $string_res .= '</tbody>","                        </table>';","        ","        disconnectDb($mysql);","    }","","    return $string_res;","}","","if($_GET['ciudades'] == 0)","{","    $ciudades = getCiudades();","    ","    echo $ciudades;","}","else","{","    $pattern=strtolower($_GET['pattern']);","    ","    $response=\"\";","    $size=0;","","    $words = getPaises(0); ","    $ids = getPaises(1); ","","    for($i=0; $i<count($words); $i++)","    {","       $pos=stripos(strtolower($words[$i]),$pattern);","       if(!($pos===false))","       {","         $size++;","         $word=$words[$i];","         $id = $ids[$i];   ","         $response.=\"<option value=\\\"$id\\\">$word</option>\";","       }","    }","    ","    //var_dump($response);","    ","    if($size>0)","      echo \"<select id=\\\"list\\\" size=$size onclick=\\\"selectValue()\\\">$response</select>\";","}","","?>",""],"id":1}],[{"start":{"row":122,"column":1},"end":{"row":122,"column":26},"action":"remove","lines":["   //var_dump($response);"],"id":2}],[{"start":{"row":122,"column":0},"end":{"row":122,"column":1},"action":"remove","lines":[" "],"id":3}],[{"start":{"row":121,"column":4},"end":{"row":122,"column":0},"action":"remove","lines":["",""],"id":4}],[{"start":{"row":121,"column":0},"end":{"row":121,"column":4},"action":"remove","lines":["    "],"id":5}],[{"start":{"row":121,"column":0},"end":{"row":122,"column":4},"action":"remove","lines":["","    "],"id":6}],[{"start":{"row":55,"column":1},"end":{"row":56,"column":0},"action":"insert","lines":["",""],"id":7},{"start":{"row":56,"column":0},"end":{"row":56,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":56,"column":4},"end":{"row":56,"column":5},"action":"insert","lines":["i"],"id":8}],[{"start":{"row":56,"column":5},"end":{"row":56,"column":6},"action":"insert","lines":["d"],"id":9}],[{"start":{"row":56,"column":5},"end":{"row":56,"column":6},"action":"remove","lines":["d"],"id":10}],[{"start":{"row":56,"column":4},"end":{"row":56,"column":5},"action":"remove","lines":["i"],"id":11}],[{"start":{"row":56,"column":4},"end":{"row":56,"column":5},"action":"insert","lines":["%"],"id":12}],[{"start":{"row":56,"column":4},"end":{"row":56,"column":5},"action":"remove","lines":["%"],"id":13}],[{"start":{"row":56,"column":4},"end":{"row":56,"column":5},"action":"insert","lines":["$"],"id":14}],[{"start":{"row":56,"column":5},"end":{"row":56,"column":6},"action":"insert","lines":["i"],"id":15}],[{"start":{"row":56,"column":6},"end":{"row":56,"column":7},"action":"insert","lines":["d"],"id":16}],[{"start":{"row":56,"column":7},"end":{"row":56,"column":8},"action":"insert","lines":[" "],"id":17}],[{"start":{"row":56,"column":8},"end":{"row":56,"column":9},"action":"insert","lines":["="],"id":18}],[{"start":{"row":56,"column":9},"end":{"row":56,"column":10},"action":"insert","lines":[" "],"id":19}],[{"start":{"row":56,"column":10},"end":{"row":56,"column":11},"action":"insert","lines":["$"],"id":20}],[{"start":{"row":56,"column":11},"end":{"row":56,"column":12},"action":"insert","lines":["_"],"id":21}],[{"start":{"row":56,"column":12},"end":{"row":56,"column":13},"action":"insert","lines":["S"],"id":22}],[{"start":{"row":56,"column":12},"end":{"row":56,"column":13},"action":"remove","lines":["S"],"id":23}],[{"start":{"row":56,"column":11},"end":{"row":56,"column":12},"action":"remove","lines":["_"],"id":24}],[{"start":{"row":56,"column":11},"end":{"row":56,"column":12},"action":"insert","lines":["_"],"id":25}],[{"start":{"row":56,"column":12},"end":{"row":56,"column":13},"action":"insert","lines":["G"],"id":26}],[{"start":{"row":56,"column":13},"end":{"row":56,"column":14},"action":"insert","lines":["E"],"id":27}],[{"start":{"row":56,"column":14},"end":{"row":56,"column":15},"action":"insert","lines":["T"],"id":28}],[{"start":{"row":56,"column":15},"end":{"row":56,"column":17},"action":"insert","lines":["[]"],"id":29}],[{"start":{"row":56,"column":16},"end":{"row":56,"column":18},"action":"insert","lines":["\"\""],"id":30}],[{"start":{"row":56,"column":17},"end":{"row":56,"column":18},"action":"insert","lines":["C"],"id":31}],[{"start":{"row":56,"column":17},"end":{"row":56,"column":18},"action":"remove","lines":["C"],"id":32}],[{"start":{"row":56,"column":17},"end":{"row":56,"column":18},"action":"insert","lines":["i"],"id":33}],[{"start":{"row":56,"column":18},"end":{"row":56,"column":19},"action":"insert","lines":["d"],"id":34}],[{"start":{"row":56,"column":21},"end":{"row":56,"column":22},"action":"insert","lines":[";"],"id":35}],[{"start":{"row":56,"column":22},"end":{"row":57,"column":0},"action":"insert","lines":["",""],"id":36},{"start":{"row":57,"column":0},"end":{"row":57,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":57,"column":4},"end":{"row":58,"column":0},"action":"insert","lines":["",""],"id":37},{"start":{"row":58,"column":0},"end":{"row":58,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":58,"column":4},"end":{"row":58,"column":5},"action":"insert","lines":["v"],"id":38}],[{"start":{"row":58,"column":5},"end":{"row":58,"column":6},"action":"insert","lines":["a"],"id":39}],[{"start":{"row":58,"column":6},"end":{"row":58,"column":7},"action":"insert","lines":["r"],"id":40}],[{"start":{"row":58,"column":7},"end":{"row":58,"column":8},"action":"insert","lines":["_"],"id":41}],[{"start":{"row":58,"column":8},"end":{"row":58,"column":9},"action":"insert","lines":["d"],"id":42}],[{"start":{"row":58,"column":4},"end":{"row":58,"column":9},"action":"remove","lines":["var_d"],"id":43},{"start":{"row":58,"column":4},"end":{"row":58,"column":14},"action":"insert","lines":["var_dump()"]}],[{"start":{"row":58,"column":13},"end":{"row":58,"column":14},"action":"insert","lines":["$"],"id":44}],[{"start":{"row":58,"column":14},"end":{"row":58,"column":15},"action":"insert","lines":["i"],"id":45}],[{"start":{"row":58,"column":15},"end":{"row":58,"column":16},"action":"insert","lines":["d"],"id":46}],[{"start":{"row":58,"column":17},"end":{"row":58,"column":18},"action":"insert","lines":[";"],"id":47}],[{"start":{"row":58,"column":18},"end":{"row":59,"column":0},"action":"insert","lines":["",""],"id":48},{"start":{"row":59,"column":0},"end":{"row":59,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":64,"column":43},"end":{"row":64,"column":44},"action":"insert","lines":[" "],"id":49}],[{"start":{"row":64,"column":44},"end":{"row":64,"column":45},"action":"insert","lines":["W"],"id":50}],[{"start":{"row":64,"column":45},"end":{"row":64,"column":46},"action":"insert","lines":["H"],"id":51}],[{"start":{"row":64,"column":46},"end":{"row":64,"column":47},"action":"insert","lines":["E"],"id":52}],[{"start":{"row":64,"column":47},"end":{"row":64,"column":48},"action":"insert","lines":["R"],"id":53}],[{"start":{"row":64,"column":48},"end":{"row":64,"column":49},"action":"insert","lines":["E"],"id":54}],[{"start":{"row":64,"column":49},"end":{"row":64,"column":50},"action":"insert","lines":[" "],"id":55}],[{"start":{"row":64,"column":50},"end":{"row":64,"column":51},"action":"insert","lines":["i"],"id":56}],[{"start":{"row":64,"column":51},"end":{"row":64,"column":52},"action":"insert","lines":["d"],"id":57}],[{"start":{"row":64,"column":52},"end":{"row":64,"column":53},"action":"insert","lines":["_"],"id":58}],[{"start":{"row":64,"column":50},"end":{"row":64,"column":53},"action":"remove","lines":["id_"],"id":59},{"start":{"row":64,"column":50},"end":{"row":64,"column":57},"action":"insert","lines":["id_Pais"]}],[{"start":{"row":64,"column":57},"end":{"row":64,"column":58},"action":"insert","lines":[" "],"id":60}],[{"start":{"row":64,"column":58},"end":{"row":64,"column":59},"action":"insert","lines":["="],"id":61}],[{"start":{"row":64,"column":59},"end":{"row":64,"column":60},"action":"insert","lines":[" "],"id":62}],[{"start":{"row":64,"column":61},"end":{"row":64,"column":62},"action":"insert","lines":["\""],"id":63}],[{"start":{"row":64,"column":61},"end":{"row":64,"column":62},"action":"insert","lines":["'"],"id":64}],[{"start":{"row":64,"column":62},"end":{"row":64,"column":63},"action":"insert","lines":["'"],"id":65}],[{"start":{"row":64,"column":62},"end":{"row":64,"column":63},"action":"insert","lines":["."],"id":66}],[{"start":{"row":64,"column":62},"end":{"row":64,"column":63},"action":"remove","lines":["."],"id":67}],[{"start":{"row":64,"column":61},"end":{"row":64,"column":63},"action":"remove","lines":["''"],"id":68}],[{"start":{"row":64,"column":61},"end":{"row":64,"column":62},"action":"remove","lines":["\""],"id":69}],[{"start":{"row":64,"column":60},"end":{"row":64,"column":61},"action":"remove","lines":["\""],"id":70}],[{"start":{"row":64,"column":59},"end":{"row":64,"column":60},"action":"remove","lines":[" "],"id":71}],[{"start":{"row":64,"column":59},"end":{"row":64,"column":60},"action":"insert","lines":["\""],"id":72}],[{"start":{"row":64,"column":59},"end":{"row":64,"column":60},"action":"insert","lines":[" "],"id":73}],[{"start":{"row":64,"column":61},"end":{"row":64,"column":62},"action":"insert","lines":["\""],"id":74}],[{"start":{"row":64,"column":62},"end":{"row":64,"column":63},"action":"insert","lines":["\""],"id":75}],[{"start":{"row":64,"column":61},"end":{"row":64,"column":62},"action":"insert","lines":["'"],"id":76}],[{"start":{"row":64,"column":61},"end":{"row":64,"column":62},"action":"remove","lines":["'"],"id":77}],[{"start":{"row":64,"column":60},"end":{"row":64,"column":61},"action":"insert","lines":["'"],"id":78}],[{"start":{"row":64,"column":63},"end":{"row":64,"column":64},"action":"insert","lines":["'"],"id":79}],[{"start":{"row":64,"column":62},"end":{"row":64,"column":63},"action":"insert","lines":["-"],"id":80}],[{"start":{"row":64,"column":62},"end":{"row":64,"column":63},"action":"remove","lines":["-"],"id":81}],[{"start":{"row":64,"column":62},"end":{"row":64,"column":63},"action":"insert","lines":["."],"id":82}],[{"start":{"row":64,"column":63},"end":{"row":64,"column":64},"action":"insert","lines":["$"],"id":83}],[{"start":{"row":64,"column":64},"end":{"row":64,"column":65},"action":"insert","lines":["i"],"id":84}],[{"start":{"row":64,"column":65},"end":{"row":64,"column":66},"action":"insert","lines":["d"],"id":85}],[{"start":{"row":64,"column":66},"end":{"row":64,"column":67},"action":"insert","lines":["."],"id":86}],[{"start":{"row":57,"column":4},"end":{"row":59,"column":4},"action":"remove","lines":["","    var_dump($id);","    "],"id":87}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":57,"column":4},"end":{"row":57,"column":4},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1521074772720,"hash":"65f0d048e818542eb699df2b0f0de966d45ff470"}